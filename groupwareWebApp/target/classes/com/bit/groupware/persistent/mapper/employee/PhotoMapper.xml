<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.bit.groupware.persistent.mapper.PhotoMapper">
	
	<insert id="insertPhoto" parameterType="map" statementType="PREPARED">
		<selectKey keyProperty="photoNo" resultType="String" statementType="PREPARED" order="BEFORE">
			select 'P'||lpad(photo_no_seq.nextval,5,0) from dual;		
		</selectKey>
		<foreach item="photo" collection="photos" open="insert all" close="select * from dual">
		 	insert into photo (photo_no, photo_name, system_file_name, file_size, division, emp_no )
   			values (#{photo.photoNo}, #{photo.photoName}, #{photo.systemFileName}, 
   			         #{photo.division}, #{photo.fileSize}, #{photo.empNo} )
		</foreach>	 	
	</insert>
	
	<delete id="deletePhoto" parameterType="String" statementType="PREPARED">
		delete from photo
		where photo_no = #{photoNo};
	</delete>
	

</mapper>

